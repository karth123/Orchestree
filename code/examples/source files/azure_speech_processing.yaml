diagram:
  name: Azure-Powered Speech Processing Service
  open: true
  resources:
    # Client (Custom Resource)
    - id: client
      name: Client
      type: custom
      icon: 

    # Speech Processing Cluster
    - id: speech-processing-cluster
      name: Speech Processing Cluster
      type: cluster
      of:
        - id: speech-functions
          name: Azure Functions
          type: azure.compute.function
          icon: 
        - id: speech-service
          name: Azure Speech Service
          type: azure.ai.speech-service
          icon: 
        - id: storage-account
          name: Azure Storage Account
          type: azure.storage.storage-account
          icon: 

    # Monitoring and Logging Cluster
    - id: monitoring-cluster
      name: Monitoring & Logging Cluster
      type: cluster
      of:
        - id: app-insights
          name: Azure Application Insights
          type: azure.monitoring.app-insights
          icon: 

    # API Gateway Cluster
    - id: api-gateway-cluster
      name: API Gateway Cluster
      type: cluster
      of:
        - id: api-management
          name: Azure API Management
          type: azure.api-management.api-management
          icon: 

# Relationships between resources and clusters
  - relates:
    from: client
    to: api-gateway-cluster.api-management
    direction: incoming
    description: Client initiates the speech processing pipeline

  - relates:
    from: speech-processing-cluster.speech-functions
    to: speech-processing-cluster.speech-service
    direction: outgoing
    description: Speech Functions sends audio for processing

  - relates:
    from: speech-processing-cluster.speech-service
    to: speech-processing-cluster.speech-functions
    direction: outgoing
    description: Speech Service returns processed audio/text

  - relates:
    from: speech-processing-cluster.speech-functions
    to: speech-processing-cluster.storage-account
    direction: outgoing
    description: Stores input/output data in Storage Account

  - relates:
    from: speech-processing-cluster.speech-functions
    to: monitoring-cluster.app-insights
    direction: outgoing
    description: Sends logs for monitoring

  - relates:
    from: speech-processing-cluster.speech-service
    to: monitoring-cluster.app-insights
    direction: outgoing
    description: Sends logs for monitoring

  - relates:
    from: api-gateway-cluster.api-management
    to: speech-processing-cluster.speech-functions
    direction: outgoing
    description: API Management routes requests to Functions
